{"from": "fastapi import FastAPI\nfrom fastapi import Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer\nfrom pydantic import BaseModel\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nfrom jose import jwt\nfrom datetime import datetime, timedelta\n\n# Database configuration\nSQLALCHEMY_DATABASE_URL = "sqlite:///database.db"\n\nengine = create_engine(SQLALCHEMY_DATABASE_URL)\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\nBase = declarative_base()\n\n# FastAPI application instance\napp = FastAPI()\n\n# OAuth2 scheme\noauth2_scheme = OAuth2PasswordBearer(tokenUrl="token")\n\n# Dependency\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# Main route\n@app.get("/items")\ndef read_items():\n    return ["Item 1", "Item 2"]\n\n# Token route\n@app.post("/token")\ndef login_for_access_token(db: Session = Depends(get_db)):\n    # User credentials\n    username = "user1"\n    password = "password1"\n    # Verify user credentials\n    if username != "user1" or password != "password1":\n        raise HTTPException(status_code=status.HTTP_401_UNAUTHORIZED, detail="Incorrect username or password", headers={"WWW-Authenticate": "Bearer"})\n    # Create access token\n    access_token = jwt.encode({"sub": username}, "secret_key", algorithm="HS256")\n    return {"access_token": access_token, "token_type": "bearer"}